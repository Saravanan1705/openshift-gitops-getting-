name: Create Jira Issue

on:
  push:
    branches:
      - main 
      
jobs:
  create-jira-issue:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Create Jira Issue
        env:
          JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
          JIRA_BASE_URL: https://prodevans-saravanann.atlassian.net
        run: |
          curl --location 'https://prodevans-saravanann.atlassian.net/rest/api/2/issue/' \
          --header 'Content-Type: application/json' \
          --header 'Authorization: Basic c2FyYXZhbmFuLm5AcHJvZGV2YW5zLmNvbTpBVEFUVDN4RmZHRjAxVWVTWTB0Z2lVaWdfSGRXdi14bGhERF9ZaWhjRG40djhBaG1PeWxxd21JNVBiTE03TERKay0taTh3eW9CNUtSeXFPSFlJNk9OdFFRT3BsemRnNUo2VFdYUUY2MWRDTlJybU5jSmV5ek51cXgtYXZjZS1ZZmNCUUFLWXpLTUlCTjY2eUxYTkZNYV9HZm1NRFoxaWNTTnRoY3JxSGpnMDZQbE9QcjB4dkpSUnc9NThFNkQ4MkE=' \
          --data '{
              "fields": {
                "project": {
                  "key": "KAN"
                },
                "summary": "Issue",
                "description": "Detailed description of your issue",
                "issuetype": {
                  "name": "Task"
                }
              }
            }' 
